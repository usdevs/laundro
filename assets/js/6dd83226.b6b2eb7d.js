"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[630],{366:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return d},default:function(){return c}});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=["components"],s={id:"remote-access",title:"Remote Access (SSH)"},l=void 0,p={unversionedId:"RPI/remote-access",id:"RPI/remote-access",isDocsHomePage:!1,title:"Remote Access (SSH)",description:"Primer on SSH",source:"@site/docs/01-RPI/02-remote-access.md",sourceDirName:"01-RPI",slug:"/RPI/remote-access",permalink:"/laundro/RPI/remote-access",editUrl:"https://github.com/usdevs/laundro/tree/docs/docs/01-RPI/02-remote-access.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"remote-access",title:"Remote Access (SSH)"},sidebar:"tutorialSidebar",previous:{title:"Setting Up",permalink:"/laundro/RPI/setting-up"},next:{title:"Networking",permalink:"/laundro/RPI/networking"}},d=[{value:"Primer on SSH",id:"primer-on-ssh",children:[],level:2},{value:"Set up",id:"set-up",children:[{value:"Remote Server (RPI)",id:"remote-server-rpi",children:[],level:3},{value:"Client (You)",id:"client-you",children:[],level:3}],level:2},{value:"SSH via LAN (Direct Connection)",id:"ssh-via-lan-direct-connection",children:[],level:2},{value:"SSH via USB",id:"ssh-via-usb",children:[],level:2},{value:"SSH via OHS/NUS Network",id:"ssh-via-ohsnus-network",children:[],level:2},{value:"Reference",id:"reference",children:[],level:2}],m={toc:d};function c(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"primer-on-ssh"},"Primer on SSH"),(0,r.kt)("p",null,"The intuition behind SSH (Secure Shell) is quite straight-forward. Built on the public-key cryptography system, the way you prove your identity would be through a pair of public and private keys that you will possess. To access a remote SSH server (in this case our RPI), your public key (",(0,r.kt)("inlineCode",{parentName:"p"},"pubKey"),") would need to be in the list of ",(0,r.kt)("inlineCode",{parentName:"p"},"authorized_keys")," on the remote server. Subsequently, you would use your private key (",(0,r.kt)("inlineCode",{parentName:"p"},"privKey"),") to authenciate yourself for the server to grant you authorization."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Authenication Process")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The actual process is more complicated than this, this is meant to just give a sufficient intuition on how this works")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Client attempts to the remote server by informing the server which ",(0,r.kt)("inlineCode",{parentName:"li"},"pubKey")," it should use for the auth process"),(0,r.kt)("li",{parentName:"ol"},"Remote server generates a random string and encrypts it using your ",(0,r.kt)("inlineCode",{parentName:"li"},"pubKey")),(0,r.kt)("li",{parentName:"ol"},"Client receives the encrypted string"),(0,r.kt)("li",{parentName:"ol"},"Client attempts to decrypt it using its ",(0,r.kt)("inlineCode",{parentName:"li"},"privKey")),(0,r.kt)("li",{parentName:"ol"},"Client sends the decrypted (",(0,r.kt)("em",{parentName:"li"},"the actual process have some additional steps"),") package back to the server"),(0,r.kt)("li",{parentName:"ol"},"Server checks that it corresponds and grant authorization accordingly")),(0,r.kt)("h2",{id:"set-up"},"Set up"),(0,r.kt)("p",null,"Before we can SSH into the RPI, there are some set up that we will need to do on both client (You) and server (RPI) side. This mainly involves the client setting up its SSH client and allow SSH access on the server."),(0,r.kt)("h3",{id:"remote-server-rpi"},"Remote Server (RPI)"),(0,r.kt)("p",null,"After a flash OS install, SSH is not enabled by default."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"To enable the SSH server")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo raspi-config\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Navigate to ",(0,r.kt)("strong",{parentName:"li"},"Interface Options")),(0,r.kt)("li",{parentName:"ol"},"Navigate to ",(0,r.kt)("strong",{parentName:"li"},"P2 SSH")),(0,r.kt)("li",{parentName:"ol"},"Enable it")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Another way would be to add a file named ",(0,r.kt)("inlineCode",{parentName:"p"},"ssh"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"ssh.txt")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"boot")," drive of the PI."),(0,r.kt)("p",{parentName:"div"},"You can add it to the OS image before flashing to the PI."))),(0,r.kt)("h3",{id:"client-you"},"Client (You)"),(0,r.kt)("p",null,"There are couple of GUI-based SSH clients out there (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"PuTTY"),") or you can opt for just the command-line based ",(0,r.kt)("inlineCode",{parentName:"p"},"OpenSSH")," client."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"OpenSSH")," have been integrated into ",(0,r.kt)("inlineCode",{parentName:"p"},"win")," as a built-in")),(0,r.kt)("p",null,"The following would be a simple guide for those that opt for the ",(0,r.kt)("inlineCode",{parentName:"p"},"OpenSSH")," client."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"I believe GUI-based clients should already handle all these things for you.")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Generate your SSH key pair (",(0,r.kt)("inlineCode",{parentName:"strong"},"pubKey")," and ",(0,r.kt)("inlineCode",{parentName:"strong"},"privKey"),")")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ssh-keygen\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"It will subsequently prompt you to save the keys generated (its a readable text file) to the ",(0,r.kt)("inlineCode",{parentName:"strong"},"*/.ssh/id_rsa")," files (path prefix would differ based on OS)")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"*/.ssh/id_rsa"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"privKey")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"*/.ssh/id_rsa.pub"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"pubKey")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Set a passphrase")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You will need to give this passphrase everytime you want to use your ",(0,r.kt)("inlineCode",{parentName:"li"},"privKey")," (treat this as a master password)"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"At the end of the process you will get a summary")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"Your identification has been saved in /Users/shenyihong/.ssh/id_rsa\nYour public key has been saved in /Users/shenyihong/.ssh/id_rsa.pub\nThe key fingerprint is:\nSHA256:kiUhzyvccIKx07jmzAj512lhMCfEue7F2o+vzMxg7x0 shenyihong@Shens-MBP\nThe key's randomart image is:\n+---[RSA 3072]----+\n|  ..o..          |\n|   Bo+ .         |\n|  = B.* .        |\n| . +.X =         |\n|o o.o.B S        |\n|.B  .+o+         |\n|. =.+++ E        |\n|   ooO.o .       |\n|     .X++        |\n+----[SHA256]-----+\n")),(0,r.kt)("div",{parentName:"li",className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The randomart image is generated using your ",(0,r.kt)("inlineCode",{parentName:"p"},"pubKey"),". This is useful for verification as instead of comparing the ",(0,r.kt)("inlineCode",{parentName:"p"},"pubKey")," stored on the server character by character, you can simply compare the randomart image."))))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Right now, we have the SSH server and client side set up individually, next we will need to set up a connection between the RPI and the client to copy our ",(0,r.kt)("inlineCode",{parentName:"strong"},"pubKey")," to the server.")),(0,r.kt)("h2",{id:"ssh-via-lan-direct-connection"},"SSH via LAN (Direct Connection)"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Basically we are just directly connecting a ethernet cable between the client and the server (RPI)")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The IP address on RPI's ",(0,r.kt)("inlineCode",{parentName:"p"},"eth0")," interface should be static. This means on each connection, the IP address of the RPI should remain the same "))),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Find out which network interface you are using to connect to the RPI (using ",(0,r.kt)("inlineCode",{parentName:"p"},"ifconfig"),")")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Get the network address and the subnet mask")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Discovering the IP address of the RPI"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Without")," a keyboard attached to RPI",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"We will need to scan our network inteface for the presence of a RPI device"),(0,r.kt)("li",{parentName:"ol"},"Install ",(0,r.kt)("inlineCode",{parentName:"li"},"nmap")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"nmap -sn <net-addr>/<mask>")),(0,r.kt)("li",{parentName:"ol"},"Inspect result of scan for a RPI device",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Since it is a direct connection, we will likely pick up just one device which should correspond to the RPI")))))),(0,r.kt)("div",{parentName:"li",className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Depending on the size of the ",(0,r.kt)("inlineCode",{parentName:"p"},"netmask"),", the scan can take quite a while"),(0,r.kt)("p",{parentName:"div"},"I would advise if it is a 16-bit mask, just give up and get a keyboard."))),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"With")," a keyboard attached to RPI",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"We simply just need to grab the RPI's IP address",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ifconfig | grep -A 3 eth0\n"))),(0,r.kt)("li",{parentName:"ul"},"Inspect the IP address under ",(0,r.kt)("inlineCode",{parentName:"li"},"inet")," (this is the RPI IP address)"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Copy your ",(0,r.kt)("inlineCode",{parentName:"p"},"pubKey")," to the RPI"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ssh-copy-id pi@<rpi-ip-addr>\n")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You will be prompted for the password for the ",(0,r.kt)("inlineCode",{parentName:"li"},"pi")," user",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If there is not change of password, it will be the ",(0,r.kt)("a",{parentName:"li",href:"/RPI/setting-up#default-login"},"default login")))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"You are all done"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ssh pi@<rpi-ip-addr>\n")))),(0,r.kt)("h2",{id:"ssh-via-usb"},"SSH via USB"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"TODO")),(0,r.kt)("h2",{id:"ssh-via-ohsnus-network"},"SSH via OHS/NUS Network"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"TODO")),(0,r.kt)("h2",{id:"reference"},"Reference"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys"},"https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.raspberrypi.com/documentation/computers/remote-access.html"},"https://www.raspberrypi.com/documentation/computers/remote-access.html"))))}c.isMDXComponent=!0}}]);